<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<cruisecontrol>
  <!-- pull in the environment configuration -->
  <property environment="env" toupper="no"/>

  <!--
    Specification for the vc9 build
    -->
  <project name="CUTS-vc9"
           requireModification="true"
           buildafterfailed="false">
    <property name="build.type" value="vc9" />
    <property name="cuts.dir" value="${env.VC90SANDBOX}/CUTS" />
    <property name="cuts.integration.dir" value="${cuts.dir}/integration" />
    <property name="cuts.cc.dir" value="${cuts.integration.dir}/cruisecontrol" />

    <listeners>
      <currentbuildstatuslistener file="logs/${project.name}/status.txt"/>
    </listeners>

    <bootstrappers>
      <svnbootstrapper localWorkingCopy="${cuts.dir}" />
    </bootstrappers>

    <modificationset quietperiod="60">
      <svn LocalWorkingCopy="${cuts.dir}"
           checkExternals="true"
           useLocalRevision="true" />
    </modificationset>

    <schedule>
      <ant antscript="${cuts.cc.dir}/ant-vc9.bat"
           buildfile="${cuts.integration.dir}/autobuild.build"
           target="build.noupdate"
           time="0200">
        <property name="mpc.type" value="${build.type}" />
      </ant>
    </schedule>
  </project>

  <!--r
    Specification for the vc9 force only build
    -->
  <project name="CUTS-vc9-forcebuild"
           requireModification="false"
           forceOnly="true">
    <property name="build.type" value="vc9" />
    <property name="cuts.dir" value="${env.VC90SANDBOX}/CUTS" />
    <property name="cuts.integration.dir" value="${cuts.dir}/integration" />
    <property name="cuts.cc.dir" value="${cuts.integration.dir}/cruisecontrol" />

    <listeners>
      <currentbuildstatuslistener file="logs/${project.name}/status.txt"/>
    </listeners>

    <bootstrappers>
      <svnbootstrapper localWorkingCopy="${cuts.dir}" />
    </bootstrappers>

    <modificationset quietperiod="60">
      <svn LocalWorkingCopy="${cuts.dir}"
           checkExternals="true"
           useLocalRevision="true" />
    </modificationset>

    <schedule>
      <ant antscript="${cuts.cc.dir}/ant-vc9.bat"
           buildfile="${cuts.integration.dir}/autobuild.build"
           target="build.noupdate">
        <property name="mpc.type" value="${build.type}" />
      </ant>
    </schedule>
  </project>
</cruisecontrol>
